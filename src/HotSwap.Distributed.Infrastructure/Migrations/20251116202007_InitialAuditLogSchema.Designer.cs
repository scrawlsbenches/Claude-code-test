// <auto-generated />
using System;
using HotSwap.Distributed.Infrastructure.Data;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using Npgsql.EntityFrameworkCore.PostgreSQL.Metadata;

#nullable disable

namespace HotSwap.Distributed.Infrastructure.Migrations
{
    [DbContext(typeof(AuditLogDbContext))]
    [Migration("20251116202007_InitialAuditLogSchema")]
    partial class InitialAuditLogSchema
    {
        /// <inheritdoc />
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "9.0.1")
                .HasAnnotation("Relational:MaxIdentifierLength", 63);

            NpgsqlModelBuilderExtensions.UseIdentityByDefaultColumns(modelBuilder);

            modelBuilder.Entity("HotSwap.Distributed.Infrastructure.Data.Entities.ApprovalAuditEvent", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<Guid>("ApprovalId")
                        .HasColumnType("uuid")
                        .HasColumnName("approval_id");

                    b.Property<string>("ApprovalStatus")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("approval_status");

                    b.PrimitiveCollection<string[]>("ApproverEmails")
                        .HasColumnType("text[]")
                        .HasColumnName("approver_emails");

                    b.Property<long>("AuditLogId")
                        .HasColumnType("bigint")
                        .HasColumnName("audit_log_id");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<DateTime?>("DecisionAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("decision_at");

                    b.Property<string>("DecisionByEmail")
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)")
                        .HasColumnName("decision_by_email");

                    b.Property<string>("DecisionReason")
                        .HasColumnType("text")
                        .HasColumnName("decision_reason");

                    b.Property<Guid>("DeploymentExecutionId")
                        .HasColumnType("uuid")
                        .HasColumnName("deployment_execution_id");

                    b.Property<bool>("IsExpired")
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("boolean")
                        .HasColumnName("is_expired");

                    b.Property<string>("Metadata")
                        .HasColumnType("jsonb")
                        .HasColumnName("metadata");

                    b.Property<string>("ModuleName")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)")
                        .HasColumnName("module_name");

                    b.Property<string>("ModuleVersion")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("module_version");

                    b.Property<string>("RequesterEmail")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)")
                        .HasColumnName("requester_email");

                    b.Property<string>("TargetEnvironment")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("target_environment");

                    b.Property<DateTime>("TimeoutAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("timeout_at");

                    b.HasKey("Id");

                    b.HasIndex("ApprovalId")
                        .HasDatabaseName("idx_approval_audit_approval_id");

                    b.HasIndex("ApprovalStatus")
                        .HasDatabaseName("idx_approval_audit_status");

                    b.HasIndex("AuditLogId")
                        .IsUnique();

                    b.HasIndex("DecisionByEmail")
                        .HasDatabaseName("idx_approval_audit_approver");

                    b.HasIndex("DeploymentExecutionId")
                        .HasDatabaseName("idx_approval_audit_deployment_id");

                    b.HasIndex("RequesterEmail")
                        .HasDatabaseName("idx_approval_audit_requester");

                    b.HasIndex("TargetEnvironment")
                        .HasDatabaseName("idx_approval_audit_environment");

                    b.ToTable("approval_audit_events");
                });

            modelBuilder.Entity("HotSwap.Distributed.Infrastructure.Data.Entities.AuditLog", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("Action")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("action");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<string>("EventCategory")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("event_category");

                    b.Property<Guid>("EventId")
                        .HasColumnType("uuid")
                        .HasColumnName("event_id");

                    b.Property<string>("EventType")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("event_type");

                    b.Property<string>("Message")
                        .HasColumnType("text")
                        .HasColumnName("message");

                    b.Property<string>("Metadata")
                        .HasColumnType("jsonb")
                        .HasColumnName("metadata");

                    b.Property<string>("ResourceId")
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)")
                        .HasColumnName("resource_id");

                    b.Property<string>("ResourceType")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("resource_type");

                    b.Property<string>("Result")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("result");

                    b.Property<string>("Severity")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)")
                        .HasColumnName("severity");

                    b.Property<string>("SourceIp")
                        .HasMaxLength(45)
                        .HasColumnType("character varying(45)")
                        .HasColumnName("source_ip");

                    b.Property<string>("SpanId")
                        .HasMaxLength(32)
                        .HasColumnType("character varying(32)")
                        .HasColumnName("span_id");

                    b.Property<DateTime>("Timestamp")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("timestamp");

                    b.Property<string>("TraceId")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)")
                        .HasColumnName("trace_id");

                    b.Property<string>("UserAgent")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasColumnName("user_agent");

                    b.Property<string>("UserEmail")
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)")
                        .HasColumnName("user_email");

                    b.Property<Guid?>("UserId")
                        .HasColumnType("uuid")
                        .HasColumnName("user_id");

                    b.Property<string>("Username")
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)")
                        .HasColumnName("username");

                    b.HasKey("Id");

                    b.HasIndex("EventCategory")
                        .HasDatabaseName("idx_audit_logs_category");

                    b.HasIndex("EventId")
                        .IsUnique();

                    b.HasIndex("EventType")
                        .HasDatabaseName("idx_audit_logs_event_type");

                    b.HasIndex("Timestamp")
                        .IsDescending()
                        .HasDatabaseName("idx_audit_logs_timestamp");

                    b.HasIndex("TraceId")
                        .HasDatabaseName("idx_audit_logs_trace_id");

                    b.HasIndex("ResourceType", "ResourceId")
                        .HasDatabaseName("idx_audit_logs_resource");

                    b.HasIndex("Username", "UserEmail")
                        .HasDatabaseName("idx_audit_logs_user");

                    b.ToTable("audit_logs");
                });

            modelBuilder.Entity("HotSwap.Distributed.Infrastructure.Data.Entities.AuthenticationAuditEvent", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<long>("AuditLogId")
                        .HasColumnType("bigint")
                        .HasColumnName("audit_log_id");

                    b.Property<string>("AuthenticationMethod")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("authentication_method");

                    b.Property<string>("AuthenticationResult")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("authentication_result");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<string>("FailureReason")
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)")
                        .HasColumnName("failure_reason");

                    b.Property<string>("GeoLocation")
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)")
                        .HasColumnName("geo_location");

                    b.Property<bool>("IsSuspicious")
                        .HasColumnType("boolean")
                        .HasColumnName("is_suspicious");

                    b.Property<string>("SourceIp")
                        .HasMaxLength(45)
                        .HasColumnType("character varying(45)")
                        .HasColumnName("source_ip");

                    b.Property<DateTime?>("TokenExpiresAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("token_expires_at");

                    b.Property<bool>("TokenIssued")
                        .HasColumnType("boolean")
                        .HasColumnName("token_issued");

                    b.Property<string>("UserAgent")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasColumnName("user_agent");

                    b.Property<Guid?>("UserId")
                        .HasColumnType("uuid")
                        .HasColumnName("user_id");

                    b.Property<string>("Username")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)")
                        .HasColumnName("username");

                    b.HasKey("Id");

                    b.HasIndex("AuditLogId")
                        .IsUnique();

                    b.HasIndex("AuthenticationResult")
                        .HasDatabaseName("idx_auth_audit_result");

                    b.HasIndex("CreatedAt")
                        .IsDescending()
                        .HasDatabaseName("idx_auth_audit_timestamp");

                    b.HasIndex("IsSuspicious")
                        .HasDatabaseName("idx_auth_audit_suspicious")
                        .HasFilter("is_suspicious = true");

                    b.HasIndex("SourceIp")
                        .HasDatabaseName("idx_auth_audit_source_ip");

                    b.HasIndex("Username")
                        .HasDatabaseName("idx_auth_audit_username");

                    b.ToTable("authentication_audit_events");
                });

            modelBuilder.Entity("HotSwap.Distributed.Infrastructure.Data.Entities.ConfigurationAuditEvent", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("ApprovedByUser")
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)")
                        .HasColumnName("approved_by_user");

                    b.Property<long>("AuditLogId")
                        .HasColumnType("bigint")
                        .HasColumnName("audit_log_id");

                    b.Property<string>("ChangeReason")
                        .HasColumnType("text")
                        .HasColumnName("change_reason");

                    b.Property<string>("ChangedByUser")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)")
                        .HasColumnName("changed_by_user");

                    b.Property<string>("ConfigurationCategory")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("configuration_category");

                    b.Property<string>("ConfigurationKey")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)")
                        .HasColumnName("configuration_key");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<string>("NewValue")
                        .HasColumnType("text")
                        .HasColumnName("new_value");

                    b.Property<string>("OldValue")
                        .HasColumnType("text")
                        .HasColumnName("old_value");

                    b.HasKey("Id");

                    b.HasIndex("AuditLogId")
                        .IsUnique();

                    b.HasIndex("ChangedByUser")
                        .HasDatabaseName("idx_config_audit_user");

                    b.HasIndex("ConfigurationCategory")
                        .HasDatabaseName("idx_config_audit_category");

                    b.HasIndex("ConfigurationKey")
                        .HasDatabaseName("idx_config_audit_key");

                    b.HasIndex("CreatedAt")
                        .IsDescending()
                        .HasDatabaseName("idx_config_audit_timestamp");

                    b.ToTable("configuration_audit_events");
                });

            modelBuilder.Entity("HotSwap.Distributed.Infrastructure.Data.Entities.DeploymentAuditEvent", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<long>("AuditLogId")
                        .HasColumnType("bigint")
                        .HasColumnName("audit_log_id");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<Guid>("DeploymentExecutionId")
                        .HasColumnType("uuid")
                        .HasColumnName("deployment_execution_id");

                    b.Property<string>("DeploymentStrategy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("deployment_strategy");

                    b.Property<int?>("DurationMs")
                        .HasColumnType("integer")
                        .HasColumnName("duration_ms");

                    b.Property<DateTime?>("EndTime")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("end_time");

                    b.Property<string>("ErrorMessage")
                        .HasColumnType("text")
                        .HasColumnName("error_message");

                    b.Property<string>("ExceptionDetails")
                        .HasColumnType("text")
                        .HasColumnName("exception_details");

                    b.Property<string>("ModuleName")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)")
                        .HasColumnName("module_name");

                    b.Property<string>("ModuleVersion")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("module_version");

                    b.Property<int?>("NodesDeployed")
                        .HasColumnType("integer")
                        .HasColumnName("nodes_deployed");

                    b.Property<int?>("NodesFailed")
                        .HasColumnType("integer")
                        .HasColumnName("nodes_failed");

                    b.Property<int?>("NodesTargeted")
                        .HasColumnType("integer")
                        .HasColumnName("nodes_targeted");

                    b.Property<string>("PipelineStage")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("pipeline_stage");

                    b.Property<string>("RequesterEmail")
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)")
                        .HasColumnName("requester_email");

                    b.Property<string>("StageStatus")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("stage_status");

                    b.Property<DateTime?>("StartTime")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("start_time");

                    b.Property<string>("TargetEnvironment")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("target_environment");

                    b.HasKey("Id");

                    b.HasIndex("AuditLogId")
                        .IsUnique();

                    b.HasIndex("DeploymentExecutionId")
                        .HasDatabaseName("idx_deployment_audit_execution_id");

                    b.HasIndex("StageStatus")
                        .HasDatabaseName("idx_deployment_audit_status");

                    b.HasIndex("StartTime")
                        .IsDescending()
                        .HasDatabaseName("idx_deployment_audit_start_time");

                    b.HasIndex("TargetEnvironment")
                        .HasDatabaseName("idx_deployment_audit_environment");

                    b.HasIndex("ModuleName", "ModuleVersion")
                        .HasDatabaseName("idx_deployment_audit_module");

                    b.ToTable("deployment_audit_events");
                });

            modelBuilder.Entity("HotSwap.Distributed.Infrastructure.Data.Entities.ApprovalAuditEvent", b =>
                {
                    b.HasOne("HotSwap.Distributed.Infrastructure.Data.Entities.AuditLog", "AuditLog")
                        .WithOne("ApprovalEvent")
                        .HasForeignKey("HotSwap.Distributed.Infrastructure.Data.Entities.ApprovalAuditEvent", "AuditLogId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("AuditLog");
                });

            modelBuilder.Entity("HotSwap.Distributed.Infrastructure.Data.Entities.AuthenticationAuditEvent", b =>
                {
                    b.HasOne("HotSwap.Distributed.Infrastructure.Data.Entities.AuditLog", "AuditLog")
                        .WithOne("AuthenticationEvent")
                        .HasForeignKey("HotSwap.Distributed.Infrastructure.Data.Entities.AuthenticationAuditEvent", "AuditLogId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("AuditLog");
                });

            modelBuilder.Entity("HotSwap.Distributed.Infrastructure.Data.Entities.ConfigurationAuditEvent", b =>
                {
                    b.HasOne("HotSwap.Distributed.Infrastructure.Data.Entities.AuditLog", "AuditLog")
                        .WithOne("ConfigurationEvent")
                        .HasForeignKey("HotSwap.Distributed.Infrastructure.Data.Entities.ConfigurationAuditEvent", "AuditLogId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("AuditLog");
                });

            modelBuilder.Entity("HotSwap.Distributed.Infrastructure.Data.Entities.DeploymentAuditEvent", b =>
                {
                    b.HasOne("HotSwap.Distributed.Infrastructure.Data.Entities.AuditLog", "AuditLog")
                        .WithOne("DeploymentEvent")
                        .HasForeignKey("HotSwap.Distributed.Infrastructure.Data.Entities.DeploymentAuditEvent", "AuditLogId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("AuditLog");
                });

            modelBuilder.Entity("HotSwap.Distributed.Infrastructure.Data.Entities.AuditLog", b =>
                {
                    b.Navigation("ApprovalEvent");

                    b.Navigation("AuthenticationEvent");

                    b.Navigation("ConfigurationEvent");

                    b.Navigation("DeploymentEvent");
                });
#pragma warning restore 612, 618
        }
    }
}
